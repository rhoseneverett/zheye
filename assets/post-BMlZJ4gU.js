import{H as d,q as o}from"./index-DyRkbYjn.js";const h=d("post",{state:()=>({data:[],currentPage:0,total:0,cid:""}),actions:{async fetchPosts(t={}){const{cid:a="",currentPage:s=1,pageSize:e=3}=t;if(this.currentPage<s||this.cid!==a){const{data:c}=await o.get(`/columns/${a}/posts?currentPage=${s}&pageSize=${e}`),{count:i,list:n}=c.data;a!==this.cid?this.$patch({currentPage:s,total:i,data:[...n],cid:a}):this.$patch({currentPage:s,total:i,data:[...this.data,...n]})}console.log("fetchPosts")},async fetchPost(t){const{data:a}=await o.get(`/posts/${t}`);return a.data},async updatePost(t,a){const{data:s}=await o.patch(`/posts/${t}`,a),{data:e}=s,c=this.data.findIndex(i=>i._id===t);c!==-1&&(this.data[c]=e)},async createPost(t){const{data:a}=await o.post("/posts/",t),{data:s}=a;this.data.push(s)},async deletePost(t){const{data:a}=await o.delete(`/posts/${t}`),{data:s}=a;return this.data=this.data.filter(e=>e._id!==t),s}},getters:{getPosts:t=>a=>t.data,getPostsByCid:t=>a=>t.data.filter(s=>s.column===a).sort((s,e)=>new Date(e.createdAt||0).getTime()-new Date(s.createdAt||0).getTime())}});export{h as u};
