import{a as y}from"./helper-TXTB4Bdo.js";import{d as p,c as i,a as r,F as x,r as C,o as n,b as t,e as u,t as _,w as f,f as g,u as c,R as k,g as L,h as w,i as V}from"./index-Fwnne_Bv.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as P,a as N}from"./useLoadMore-xyN6FS_U.js";const R="/zheye/assets/callout-VLVvcPGU.svg",S={class:"row"},B={class:"card h-100 shadow-sm"},M={class:"card-body text-center"},z=["src","alt"],A={class:"card-title"},F={class:"card-text text-left"},U=p({__name:"ColumnList",props:{list:{type:Array,required:!0}},setup(m){const o=m,d=i(()=>o.list.map(a=>(y(a,50,50),a)));return(a,l)=>(n(),r("div",S,[(n(!0),r(x,null,C(d.value,s=>(n(),r("div",{key:s._id,class:"col-4 mb-4"},[t("div",B,[t("div",M,[t("img",{src:s.avatar&&s.avatar.fitUrl,alt:s.title,class:"rounded-circle border border-light my-3"},null,8,z),t("h5",A,_(s.title),1),t("p",F,_(s.description),1),u(c(k),{to:`/column/${s._id}`,class:"btn btn-outline-primary"},{default:f(()=>l[0]||(l[0]=[g(" 进入专栏 ")])),_:2},1032,["to"])])])]))),128))]))}}),q=$(U,[["__scopeId","data-v-13fa5a1a"]]),D={class:"home-page"},E={class:"py-5 text-center container"},G={class:"row py-lg-5"},H={class:"col-lg-6 col-md-8 mx-auto"},O=p({__name:"Home",setup(m){const o=P(),d=i(()=>o.getColumns),a=i(()=>o.total),l=i(()=>o.currentPage);L(()=>{o.fetchColumns({pageSize:3})});let{loadMorePage:s,isLastPage:b}=N(o,"fetchColumns",{currentPage:l,total:a});return(I,e)=>{const v=V("RouterLink");return n(),r("div",D,[t("section",E,[t("div",G,[t("div",H,[e[2]||(e[2]=t("img",{src:R,alt:"callout",class:"w-50"},null,-1)),e[3]||(e[3]=t("h2",{class:"font-weight-light"},"随心写作，自由表达",-1)),t("p",null,[u(v,{to:"/create",class:"btn btn-primary my-2"},{default:f(()=>e[1]||(e[1]=[g("开始写文章")])),_:1})])])])]),e[4]||(e[4]=t("h4",{class:"font-weight-bold text-center"},"发现精彩",-1)),u(q,{list:d.value},null,8,["list"]),c(b)?w("",!0):(n(),r("button",{key:0,class:"btn btn-outline-primary mt-2 mb-5 mx-auto btn-block w-25 d-block",onClick:e[0]||(e[0]=(...h)=>c(s)&&c(s)(...h))}," 加载更多 "))])}}});export{O as default};
